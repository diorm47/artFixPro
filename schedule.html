<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Choose your booking schedule</title>
    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="stylesheet" href="./styles/tv-mounting.css" />
    <link rel="stylesheet" href="./styles/schedule.css" />
  </head>
  <body>
    <div class="nav_secondary">
      <div class="container">
        <nav>
          <div class="nav_left">
            <div class="nav_menu_item nav_menu_item_drop">
              <p>Our Services</p>
              <div class="nav_menu_item_drop_list">
                <a href="./tv-mounting.html"><p>TV Mounting</p></a>
                <a href="./furniture.html"><p>Furniture Assembly</p></a>
                <a href="./wall-hunting.html"><p>Wall hanging</p></a>
                <a href="#"><p>Handyman</p></a>
              </div>
            </div>

            <div class="nav_menu_item to_contacts">
              <p>Contact Us</p>
            </div>
          </div>
          <a href="./index.html" class="nav_logo">
            <img src="./assets/logo.svg" alt="" />
          </a>
          <div class="nav_right">
            <a href="#">
              <div class="nav_login">
                <img src="./assets/icons/login-user.svg" alt="" />
                <p>Log in/Sign in</p>
              </div></a
            >
          </div>
        </nav>
      </div>
    </div>
    <div class="pages_navigation">
      <div class="pages_navigation_wrapper container">
        <a href="./index.html"
          ><p><span>Home page</span></p></a
        >
        <img src="./assets/icons/chev-right.svg" alt="" />
        <a href="./tv-mounting.html">
          <p><span>TV Mounting</span></p></a
        >
        <img src="./assets/icons/chev-right.svg" alt="" />
        <p>Choose your booking schedule</p>
      </div>
    </div>
    <div class="section_title left container">
      <h2>Choose your booking schedule</h2>
    </div>
    <div class="schedule_container container">
      <div class="schedule_left">
        <div class="calendar_wrapper">
          <div class="calendar_wrapper_left">
            <div class="calendar">
              <div class="calendar_top">
                <div class="calendar_arrow">
                  <img src="./assets/icons/gree-chev-left.svg" alt="" />
                </div>
                <h3>November <span>2024</span></h3>
                <div class="calendar_arrow">
                  <img src="./assets/icons/gree-chev-right.svg" alt="" />
                </div>
              </div>
              <div class="calendar_dates">
                <div><p>Su</p></div>
                <div><p>Mo</p></div>
                <div><p>Tu</p></div>
                <div><p>We</p></div>
                <div><p>Th</p></div>
                <div><p>Fr</p></div>
                <div><p>Sa</p></div>
              </div>
              <div class="calendar_days">
                <div class="calendar_day_invicible"></div>
                <div class="calendar_day_invicible"></div>
                <div class="calendar_day_invicible"></div>
                <div class="calendar_day_invicible"></div>
                <div class="calendar_day_invicible"></div>
                <div class="calendar_day calendar_day_disabled"><p>01</p></div>
                <div class="calendar_day calendar_day_disabled"><p>02</p></div>
                <div class="calendar_day calendar_day_disabled"><p>03</p></div>
                <div class="calendar_day calendar_day_disabled"><p>04</p></div>
                <div class="calendar_day calendar_day_disabled"><p>05</p></div>
                <div class="calendar_day calendar_day_disabled"><p>06</p></div>
                <div class="calendar_day calendar_day_disabled"><p>07</p></div>
                <div class="calendar_day calendar_day_disabled"><p>08</p></div>
                <div class="calendar_day calendar_day_disabled"><p>09</p></div>
                <div class="calendar_day"><p>10</p></div>
                <div class="calendar_day"><p>11</p></div>
                <div class="calendar_day"><p>12</p></div>
                <div class="calendar_day"><p>13</p></div>
                <div class="calendar_day"><p>14</p></div>
                <div class="calendar_day"><p>15</p></div>
                <div class="calendar_day"><p>16</p></div>
                <div class="calendar_day"><p>17</p></div>
                <div class="calendar_day"><p>18</p></div>
                <div class="calendar_day"><p>19</p></div>
                <div class="calendar_day"><p>20</p></div>
                <div class="calendar_day"><p>21</p></div>
                <div class="calendar_day"><p>22</p></div>
                <div class="calendar_day"><p>23</p></div>
                <div class="calendar_day"><p>24</p></div>
                <div class="calendar_day"><p>25</p></div>
                <div class="calendar_day"><p>26</p></div>
                <div class="calendar_day"><p>27</p></div>
                <div class="calendar_day"><p>28</p></div>
                <div class="calendar_day"><p>29</p></div>
                <div class="calendar_day"><p>30</p></div>
              </div>
            </div>
            <div class="calendar_totals">
              <div class="calendar_total">
                <div class="calendar_total_disabled"><p>00</p></div>
                <h4>Fully Booked</h4>
              </div>
              <div class="calendar_total">
                <div><p>00</p></div>
                <h4>Available</h4>
              </div>
            </div>
          </div>
          <div class="calendar_times">
            <div class="calendar_time">
              <p>08:00AM - 10:00AM</p>
              <input type="radio" name="time" value="08:00AM - 10:00AM" />
            </div>
            <div class="calendar_time">
              <p>09:00AM - 11:00AM</p>
              <input type="radio" name="time" value="09:00AM - 11:00AM" />
            </div>
            <div class="calendar_time">
              <p>10:00AM - 12:00PM</p>
              <input type="radio" name="time" value="10:00AM - 12:00PM" />
            </div>
            <div class="calendar_time">
              <p>11:00AM - 01:00PM</p>
              <input type="radio" name="time" value="11:00AM - 01:00PM" />
            </div>
            <div class="calendar_time">
              <p>12:00PM - 02:00PM</p>
              <input type="radio" name="time" value="12:00PM - 02:00PM" />
            </div>
            <div class="calendar_time">
              <p>01:00PM - 03:00PM</p>
              <input type="radio" name="time" value="01:00PM - 03:00PM" />
            </div>
            <div class="calendar_time">
              <p>02:00PM - 04:00PM</p>
              <input type="radio" name="time" value="02:00PM - 04:00PM" />
            </div>
            <div class="calendar_time">
              <p>03:00PM - 05:00PM</p>
              <input type="radio" name="time" value="03:00PM - 05:00PM" />
            </div>
            <div class="calendar_time">
              <p>04:00PM - 06:00PM</p>
              <input type="radio" name="time" value="04:00PM - 06:00PM" />
            </div>
            <div class="calendar_time">
              <p>05:00PM - 07:00PM</p>
              <input type="radio" name="time" value="05:00PM - 07:00PM" />
            </div>
            <div class="calendar_time">
              <p>06:00PM - 08:00PM</p>
              <input type="radio" name="time" value="06:00PM - 08:00PM" />
            </div>
          </div>
        </div>
      </div>
      <div class="services_summary">
        <div class="summary_content">
          <h2>Booking Summary</h2>

          <div class="summary_content_items"></div>
        </div>
        <div class="services_summary_total">
          <div class="services_summary_total__summ">
            <h4>Estimated</h4>
            <p>$0</p>
          </div>
          <a href="./fill-up.html">
            <button class="green_sumbit_btn">
              Confirm Selections
              <img src="./assets/icons/arrow-right.svg" alt="" /></button
          ></a>
          <button class="green_sumbit_btn chev_btm" onclick="goBack()">
            <img src="./assets/icons/rigt-chev.svg" alt="" />
          </button>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer_wrapper container">
        <div class="footer_left">
          <a href="./index.html">
            <img src="./assets/logo-dark.svg" alt="" />
          </a>
          <p>
            Copyright Â© 2024 All rights reserved. <br />
            Powered By ARTFIXPRO
          </p>
        </div>
        <div class="footer_center">
          <p class="to_services_sec">Our Services</p>
          <p class="to_contacts_sec">Contact Us</p>
        </div>
        <div class="footer_right">
          <a href="./terms.html"><p>Terms</p></a>
          <a href="./privacy.html"><p>Privacy</p></a>
        </div>
      </div>
    </footer>
    <script src="./scripts/calendar.js"></script>
    <script>
      document.querySelector(".to_contacts").addEventListener("click", () => {
        window.location.href = "/index.html#contacts_block";
      });
      document
        .querySelector(".to_contacts_sec")
        .addEventListener("click", () => {
          window.location.href = "/index.html#contacts_block";
        });
      document
        .querySelector(".to_services_sec")
        .addEventListener("click", () => {
          window.location.href = "/index.html#services_block";
        });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const summaryContainer = document.querySelector(
          ".summary_content_items"
        );
        const totalSumElement = document.querySelector(
          ".services_summary_total__summ p"
        );

        // Function to populate summary from sessionStorage
        function populateSummary() {
          // Get data from sessionStorage
          const savedData = JSON.parse(sessionStorage.getItem("summaryData"));
          if (!savedData) return; // Exit if there's no data

          const { summaryItems, totalSum } = savedData;

          // Clear the current summary items
          summaryContainer.innerHTML = "";

          // Populate summary items
          summaryItems.forEach((item) => {
            const {
              title,
              description,
              price,
              question,
              answer,
              itemName,
              quantity,
            } = item;

            // Create a summary item element
            const summaryItem = document.createElement("div");
            summaryItem.classList.add("summary_item");

            summaryItem.innerHTML = `
          <div class="summary_item_type">
            <div class="summary_item_remove">
              <img src="./assets/icons/del.svg" alt="Remove" />
            </div>
            <h4>${title || question || itemName}</h4>
          </div>
          <p>:${description || answer || `${quantity} item(s)`}</p>
          <p>${price}</p>
        `;

            // Add remove functionality
            summaryItem
              .querySelector(".summary_item_remove")
              .addEventListener("click", () => {
                if (title) {
                  removeSummaryItem(title);
                  console.log(title);
                } else {
                  removeSummaryItem(question);
                }
              });

            summaryContainer.appendChild(summaryItem);
          });

          // Update total sum
          totalSumElement.textContent = totalSum;
        }

        // Function to remove an item from the summary and sessionStorage
        function removeSummaryItem(titleToRemove) {
          const savedData = JSON.parse(sessionStorage.getItem("summaryData"));
          if (!savedData) return;

          const { summaryItems, totalSum } = savedData;

          // Filter out the item to remove
          const updatedItems = summaryItems.filter(
            (item) =>
              item.title !== titleToRemove && item.question !== titleToRemove
          );

          // Update total sum
          const updatedTotalSum = updatedItems.reduce(
            (sum, item) =>
              sum + parseFloat(item.price.replace(/[^\d.]/g, "")) || 0,
            0
          );

          // Save the updated data to sessionStorage
          sessionStorage.setItem(
            "summaryData",
            JSON.stringify({
              summaryItems: updatedItems,
              totalSum: `$${updatedTotalSum.toFixed(2)}`,
            })
          );

          // Repopulate the summary
          populateSummary();
        }

        // Populate summary on page load
        populateSummary();
      });
    </script>
  </body>
</html>
