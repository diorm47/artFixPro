<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fill up your information</title>
    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="stylesheet" href="./styles/tv-mounting.css" />
    <link rel="stylesheet" href="./styles/schedule.css" />
  </head>
  <body>
    <div class="nav_secondary">
      <div class="container">
        <nav>
          <div class="nav_left">
            <div class="nav_menu_item nav_menu_item_drop">
              <p>Our Services</p>
              <div class="nav_menu_item_drop_list">
                <a href="./tv-mounting.html"><p>TV Mounting</p></a>
                <a href="./furniture.html"><p>Furniture Assembly</p></a>
                <a href="./wall-hunting.html"><p>Wall hanging</p></a>
                <a href="#"><p>Handyman</p></a>
              </div>
            </div>

            <div class="nav_menu_item to_contacts">
              <p>Contact Us</p>
            </div>
          </div>
          <a href="./index.html" class="nav_logo">
            <img src="./assets/logo.svg" alt="" />
          </a>
          <div class="nav_right">
            <a href="#">
              <div class="nav_login">
                <img src="./assets/icons/login-user.svg" alt="" />
                <p>Log in/Sign in</p>
              </div></a
            >
          </div>
        </nav>
      </div>
    </div>
    <div class="pages_navigation">
      <div class="pages_navigation_wrapper container">
        <a href="./index.html"
          ><p><span>Home page</span></p></a
        >
        <img src="./assets/icons/chev-right.svg" alt="" />
        <a href="./tv-mounting.html">
          <p><span>TV Mounting</span></p></a
        >
        <img src="./assets/icons/chev-right.svg" alt="" />
        <a href="./schedule.html"
          ><p>
            <span>Choose your booking schedule</span>
          </p></a
        >
        <img src="./assets/icons/chev-right.svg" alt="" />
        <p>Fill up your information</p>
      </div>
    </div>

    <div class="section_title left container">
      <h2>Fill up your information</h2>
    </div>

    <div class="fill_container container">
      <div class="fill_form">
        <div class="form_twice">
          <div class="form_input">
            <input type="text" placeholder="First name*" required />
            <div class="input_error">
              <span>Fill first name</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="Last name*" required />
            <div class="input_error">
              <span>Fill last name</span>
            </div>
          </div>
          <div class="form_input">
            <input type="number" placeholder="Phone number*" required />
            <div class="input_error">
              <span>Fill phone number</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="Address*" required />
            <div class="input_error">
              <span>Fill address</span>
            </div>
          </div>
        </div>
        <div class="form_three">
          <div class="form_input">
            <input
              class="zip_code_fill_up"
              type="text"
              placeholder="ZIPcode*"
              required
              
            />
            <div class="input_error">
              <span>Fill ZIPcode</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="State*" required />
            <div class="input_error">
              <span>Fill state</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="City*" required />
            <div class="input_error">
              <span>Fill city</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="Building no*" required />
            <div class="input_error">
              <span>Fill building no</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="Unit no*" required />
            <div class="input_error">
              <span>Fill unit no</span>
            </div>
          </div>
          <div class="form_input">
            <input type="text" placeholder="Gate code*" required />
            <div class="input_error">
              <span>Fill gate code</span>
            </div>
          </div>
        </div>
        <div class="form_input">
          <input
            class="fill_up_input"
            type="email"
            placeholder="Email address*"
            required
          />
          <div class="input_error">
            <span>Fill email address</span>
          </div>
        </div>
        <div class="form_input">
          <textarea placeholder="Additional notes*" required></textarea>
          <div class="input_error">
            <span>Fill additional notes</span>
          </div>
        </div>
      </div>
      <div class="services_summary">
        <div class="summary_content">
          <h2>Booking Summary</h2>

          <div class="summary_content_items"></div>
        </div>
        <div class="services_summary_total">
          <div class="services_summary_total__summ">
            <h4>Estimated</h4>
            <p>$0</p>
          </div>
          <button class="green_sumbit_btn send_btn">
            Confirm Selections
            <img src="./assets/icons/arrow-right.svg" alt="" />
          </button>
          <a href="./schedule.html">
            <button class="green_sumbit_btn chev_btm">
              <img src="./assets/icons/rigt-chev.svg" alt="" /></button
          ></a>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer_wrapper container">
        <div class="footer_left">
          <a href="./index.html">
            <img src="./assets/logo-dark.svg" alt="" />
          </a>
          <p>
            Copyright © 2024 All rights reserved. <br />
            Powered By ARTFIXPRO
          </p>
        </div>
        <div class="footer_center">
          <p class="to_services_sec">Our Services</p>
          <p class="to_contacts_sec">Contact Us</p>
        </div>
        <div class="footer_right">
          <a href="./terms.html"><p>Terms</p></a>
          <a href="./privacy.html"><p>Privacy</p></a>
        </div>
      </div>
    </footer>

    <div class="overlay success_mess_modal" onclick="closeModals()">
      <div class="success_send_modal" onclick="event.stopPropagation()">
        <h2>
          Thank you <br />
          for booking
        </h2>
        <div class="success_status">
          <img src="./assets/icons/success-check.svg" alt="" />
          <p>
            Your booking has <br />
            been confirmed
          </p>
        </div>
        <h3>
          You will now be redirect to <br />
          dashboard in a short while...
        </h3>
        <button class="to_dashb green_sumbit_btn" onclick="goBackTwoPages()">
          Go to dashboard
        </button>
      </div>
    </div>

    <div class="overlay form_confirmation" onclick="closeModals()">
      <div
        class="success_send_modal form_confirm_modal"
        onclick="event.stopPropagation()"
      >
        <h2>Confirm and book</h2>

        <div class="estimated">
          <span>Estimated</span>
          <p id="estimatedAmount">$00.00</p>
        </div>

        <!-- Основные данные формы для подтверждения -->
        <div class="confirm_datas">
          <div class="zipcode_form_input coupon_input">
            <input type="text" name="" id="" placeholder="Enter coupon code" />
          </div>
          <div class="zipcode_form_input zipcode_form_approved">
            <input
              type="text"
              id="confirmFirstName"
              class="confirm_name_last_name_input"
              readonly
            />
            <img
              class="zipcode_form_input_icon success_icon"
              src="./assets/icons/check mark.svg"
              alt=""
            />
          </div>

          <div class="zipcode_form_input zipcode_form_approved">
            <input
              type="text"
              id="confirmPhone"
              class="confirm_phone_input"
              readonly
            />
            <img
              class="zipcode_form_input_icon success_icon"
              src="./assets/icons/check mark.svg"
              alt=""
            />
          </div>
          <div class="zipcode_form_input zipcode_form_approved">
            <input
              type="text"
              id="confirmEmail"
              class="confirm_email_input"
              readonly
            />
            <img
              class="zipcode_form_input_icon success_icon"
              src="./assets/icons/check mark.svg"
              alt=""
            />
          </div>
        </div>

        <div class="confirm_terms">
          <p>
            By confirming booking, I state that I have read and understood the
            <br />
            <a href="#">terms and conditions</a>, and I agree to the terms and
            conditions as set out by the user agreement.
          </p>
        </div>

        <button class="green_sumbit_btn" id="finalConfirmBtn">
          Confirm Booking
        </button>
      </div>
    </div>

    <script>
      document.querySelector(".to_contacts").addEventListener("click", () => {
        window.location.href = "/index.html#contacts_block";
      });

      document
        .querySelector(".to_contacts_sec")
        .addEventListener("click", () => {
          window.location.href = "/index.html#contacts_block";
        });
      document
        .querySelector(".to_services_sec")
        .addEventListener("click", () => {
          window.location.href = "/index.html#services_block";
        });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const summaryContainer = document.querySelector(
          ".summary_content_items"
        );
        const totalSumElement = document.querySelector(
          ".services_summary_total__summ p"
        );

        // Function to populate summary from sessionStorage
        function populateSummary() {
          // Get data from sessionStorage
          const savedData = JSON.parse(sessionStorage.getItem("summaryData"));
          if (!savedData) return; // Exit if there's no data

          const { summaryItems, totalSum } = savedData;

          // Clear the current summary items
          summaryContainer.innerHTML = "";

          // Populate summary items
          summaryItems.forEach((item) => {
            const {
              title,
              description,
              price,
              question,
              answer,
              itemName,
              quantity,
            } = item;

            // Create a summary item element
            const summaryItem = document.createElement("div");
            summaryItem.classList.add("summary_item");

            summaryItem.innerHTML = `
          <div class="summary_item_type">
            <div class="summary_item_remove">
              <img src="./assets/icons/del.svg" alt="Remove" />
            </div>
            <h4>${title || question || itemName}</h4>
          </div>
          <p>:${description || answer || `${quantity} item(s)`}</p>
          <p>${price}</p>
        `;

            // Add remove functionality
            summaryItem
              .querySelector(".summary_item_remove")
              .addEventListener("click", () => {
                if (title) {
                  removeSummaryItem(title);
                  console.log(title);
                } else {
                  removeSummaryItem(question);
                }
              });

            summaryContainer.appendChild(summaryItem);
          });

          // Update total sum
          totalSumElement.textContent = totalSum;
        }

        // Function to remove an item from the summary and sessionStorage
        function removeSummaryItem(titleToRemove) {
          const savedData = JSON.parse(sessionStorage.getItem("summaryData"));
          if (!savedData) return;

          const { summaryItems, totalSum } = savedData;

          // Filter out the item to remove
          const updatedItems = summaryItems.filter(
            (item) =>
              item.title !== titleToRemove && item.question !== titleToRemove
          );

          // Update total sum
          const updatedTotalSum = updatedItems.reduce(
            (sum, item) =>
              sum + parseFloat(item.price.replace(/[^\d.]/g, "")) || 0,
            0
          );

          // Save the updated data to sessionStorage
          sessionStorage.setItem(
            "summaryData",
            JSON.stringify({
              summaryItems: updatedItems,
              totalSum: `$${updatedTotalSum.toFixed(2)}`,
            })
          );

          // Repopulate the summary
          populateSummary();
        }

        // Populate summary on page load
        populateSummary();
      });
    </script>
    <script src="./scripts/fill-up.js"></script>
  </body>
</html>
